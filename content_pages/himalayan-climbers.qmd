---
title: |
  Himalayan Climbers
description: |
  Data Manipulation, Empirical Bayes, Logistic Regression Model
date: 2020-09-21
date-format: long
---

Notable topics: Data Manipulation, Empirical Bayes, Logistic Regression Model

Recorded on: 2020-09-21

Timestamps by: Eric Fletcher

[View code](https://github.com/dgrtwo/data-screencasts/blob/master/2020_09_22_himalayan_climbers.Rmd)

## Full screencast

<iframe class="video" src="https://www.youtube.com/embed/WT7FMn-_jPY" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

## Timestamps

<script id="timestamps" type="application-json">[{"timestamp_with_hours":"0:3:00","description":"Create a `geom_col` chart to visualize the top 50 tallest mountains.\r\n\r\nUse `fct_reorder` to reorder the `peak_name` factor levels by sorting along the `height_metres` variable.","functions":"ggplot | fct_reorder","packages":"ggplot | forcats","timestamp_sec":180},{"timestamp_with_hours":"0:8:50","description":"Use `summarize` with `across` to get the total number of climbs, climbers, deaths, and first year climbed. \r\n\r\nUse `mutate` to calculate the percent death rate for members and hired staff.\r\n\r\nUse `inner_join` and `select` to join with `peaks` dataset by `peak_id`.","functions":"summarize | across | arrange | mutate | inner_join","packages":"dplyr","timestamp_sec":530},{"timestamp_with_hours":"0:11:20","description":"Touching on statistical `noise` and how it impacts the death rate for mountains with fewer number of climbs, and how to account for it using various statistical methods including `Beta Binomial Regression` & `Empirical Bayes`.","timestamp_sec":680},{"timestamp_with_hours":"0:14:30","description":"Further description of `Empirical Bayes` and how to account for not overestimating death rate for mountains with fewer climbers.\r\n\r\nRecommended reading: [Introduction to Empirical Bayes: Examples from Baseball Statistics](http://varianceexplained.org/r/empirical-bayes-book/) by David Robinson","timestamp_sec":870},{"timestamp_with_hours":"0:17:00","description":"Use the `ebbr` package (Empirical Bayes for Binomial in R) to create an Empirical Bayes Estimate for each mountain by fitting prior distribution across data and adjusting the death rates down or up based on the prior distributions. \r\n\r\nUse a `geom_point` chart to visualize the difference between the raw death rate and new `ebbr` fitted death rate.","functions":"add_ebb_estimate | geom_point | geom_abline","packages":"ebbr | ggplot","timestamp_sec":1020},{"timestamp_with_hours":"0:21:20","description":"Use `geom_point` to visualize how deadly each mountain is with `geom_errorbarh` representing the 95% credible interval between minimum and maximum values.","functions":"ggplot | fct_reorder | geom_errorbarh","packages":"ggplot | forcats","timestamp_sec":1280},{"timestamp_with_hours":"0:26:35","description":"Use `geom_point` to visualize the relationship between `death rate` and `height` of mountain.  \r\n\r\nThere is not a clear relationship, but David does briefly mention how one could use `Beta Binomial Regression` to further inspect for possible relationships / trends.","functions":"geom_point","packages":"ggplot | forcats","timestamp_sec":1595},{"timestamp_with_hours":"0:28:00","description":"Use `geom_histogram` and `geom_boxplot` to visualize the distribution of time it took climbers to go from basecamp to the mountain’s high point for successful climbs only.\r\n\r\nUse `mutate` to calculate the number of days it took climbers to get from basecamp to the highpoint.\r\n\r\nAdd column to data using `case_when` and `str_detect` to identify strings in `termination_reason` that contain the word `Success` and rename them to `Success` & how to use a `vector` and `%in%` to change multiple values in `termination_reason` to `NA` and rest to `Failed`.\r\n\r\nUse `fct_lump` to show the top 10 mountains while lumping the other factor levels (mountains) into `other`.","functions":"mutate | case_when | str_detect |fct_lump | fct_reorder","packages":"dplyr | stringr | forcats","timestamp_sec":1680},{"timestamp_with_hours":"0:35:30","description":"For just Mount Everest, use `geom_histogram` and `geom_density` with `fill = success` to visualize the days from basecamp to highpoint for climbs that ended in `success`, `failure` or `other`.","functions":"geom_histogram | geom_density","packages":"ggplot","timestamp_sec":2130},{"timestamp_with_hours":"0:38:40","description":"For just Mount Everest, use `geom_histogram` to see the distribution of climbs per year.","functions":"geom_histogram","packages":"ggplot","timestamp_sec":2320},{"timestamp_with_hours":"0:39:55","description":"For just Mount Everest, use ‘geom_line` and `geom_point` to visualize `pct_death` over time by decade.\r\n\r\nUse `mutate` with `pmax` and `integer division` to create a decade variable that lumps together the data for 1970 and before.","functions":"mutate | pmax | geom_line | geom_point","packages":"ggplot | base | dplyr","timestamp_sec":2395},{"timestamp_with_hours":"0:41:30","description":"Write a function for summary statistics such as `n_climbs`, `pct_success`, `first_climb`, `pct_death`, ‘pct_hired_staff_death`.","functions":"function","timestamp_sec":2490},{"timestamp_with_hours":"0:46:20","description":"For just Mount Everest, use `geom_line` and `geom_point` to visualize `pct_success` over time by decade.","functions":"mutate | pmax | geom_line | geom_point","packages":"ggplot | base | dplyr","timestamp_sec":2780},{"timestamp_with_hours":"0:47:10","description":"For just Mount Everest, use `geom_line` and `geom_point` to visualize `pct_hired_staff_deaths ` over time by decade.\r\n\r\nDavid decides to visualize the `pct_hired_staff_deaths` and `pct_death` charts together on the same plot.","functions":"mutate | pmax | geom_line | geom_point","packages":"ggplot | base | dplyr","timestamp_sec":2830},{"timestamp_with_hours":"0:50:45","description":"For just Mount Everest, fit a logistic regression model to predict the probability of death with `format.pval` to calculate the `p.value`.\r\n\r\nUse `fct_lump` to lump together all `expedition_role` factors except for the n most frequent.","functions":"fct_lump | glm | format.pval","packages":"forcats | stats | broom | base","timestamp_sec":3045},{"timestamp_with_hours":"0:56:30","description":"Use `group_by` with `integer division` and `summarize` to calculate `n_climbers` and `pct_death` for age bucketed into decades.","functions":"group_by | summarize","packages":"dplyr","timestamp_sec":3390},{"timestamp_with_hours":"0:59:45","description":"Use `geom_point` and `geom_errorbarh` to visualize the logistic regression model with confident intervals.","functions":"geom_point | geom_errorbarh | conf.int","packages":"ggplot | broom","timestamp_sec":3585},{"timestamp_with_hours":"1:03:30","description":"Summary of screencast","timestamp_sec":3810}]</script>
