---
title: |
  Wine Ratings
description: |
  Text mining (tidytext package), LASSO regression (glmnet package)
date: 2019-05-30
date-format: long
---

Notable topics: Text mining (tidytext package), LASSO regression (glmnet package)

Recorded on: 2019-05-30

Timestamps by: Alex Cookson

[View code](https://github.com/dgrtwo/data-screencasts/blob/master/wine-ratings.Rmd)

## Full screencast

<iframe class="video" src="https://www.youtube.com/embed/AQzZNIyjyWM" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

## Timestamps

<script id="timestamps" type="application-json">[{"timestamp_with_hours":"0:3:15","description":"Using extract function from tidyr package to pull out year from text field","functions":"extract","packages":"tidyr","timestamp_sec":195},{"timestamp_with_hours":"0:9:15","description":"Changing extract function to pull out year column more accurately","functions":"extract","packages":"tidyr","timestamp_sec":555},{"timestamp_with_hours":"0:13:00","description":"Starting to explore prediction of points","timestamp_sec":780},{"timestamp_with_hours":"0:17:00","description":"Using fct_lump on country variable to collapse countries into an \"Other\" category, then fct_relevel to set the baseline category for a linear model","functions":"fct_lump | fct_relevel","timestamp_sec":1020},{"timestamp_with_hours":"0:21:30","description":"Investigating year as a potential confounding variable","timestamp_sec":1290},{"timestamp_with_hours":"0:24:45","description":"Investigating \"taster_name\" as a potential confounding variable","timestamp_sec":1485},{"timestamp_with_hours":"0:27:45","description":"Coefficient (TIE fighter) plot to see effect size of terms in a linear model, using tidy function from broom package","functions":"tidy","packages":"broom","timestamp_sec":1665},{"timestamp_with_hours":"0:30:45","description":"Polishing category names for presentation in graph using str_replace function","functions":"str_replace","timestamp_sec":1845},{"timestamp_with_hours":"0:32:15","description":"Using augment function to add predictions of linear model to original data","functions":"augment","timestamp_sec":1935},{"timestamp_with_hours":"0:33:30","description":"Plotting predicted points vs. actual points","timestamp_sec":2010},{"timestamp_with_hours":"0:34:45","description":"Using ANOVA to determine the amount of variation that explained by different terms","timestamp_sec":2085},{"timestamp_with_hours":"0:36:45","description":"Using tidytext package to set up wine review text for Lasso regression","packages":"tidytext","timestamp_sec":2205},{"timestamp_with_hours":"0:40:00","description":"Setting up and using pairwise_cor function to look at words that appear in reviews together","functions":"pairwise_cor","packages":"widyr","timestamp_sec":2400},{"timestamp_with_hours":"0:45:00","description":"Creating sparse matrix using cast_sparse function from tidytext package; used to perform a regression on positive/negative words","functions":"cast_sparse","packages":"tidytext","timestamp_sec":2700},{"timestamp_with_hours":"0:46:45","description":"Checking if rownames of sparse matrix correspond to the wine_id values they represent","timestamp_sec":2805},{"timestamp_with_hours":"0:47:00","description":"Setting up sparse matrix for using glmnet package to do sparse regression using Lasso method","packages":"glmnet","timestamp_sec":2820},{"timestamp_with_hours":"0:48:15","description":"Actually writing code for doing Lasso regression","packages":"glmnet","timestamp_sec":2895},{"timestamp_with_hours":"0:49:45","description":"Basic explanation of Lasso regression","timestamp_sec":2985},{"timestamp_with_hours":"0:51:00","description":"Putting Lasso model into tidy format","functions":"tidy","timestamp_sec":3060},{"timestamp_with_hours":"0:53:15","description":"Explaining how the number of terms increases as lambda (penalty parameter) decreases","timestamp_sec":3195},{"timestamp_with_hours":"0:54:00","description":"Answering how we choose a lambda value (penalty parameter) for Lasso regression","timestamp_sec":3240},{"timestamp_with_hours":"0:56:45","description":"Using parallelization for intensive computations","timestamp_sec":3405},{"timestamp_with_hours":"0:58:30","description":"Adding price (from original linear model) to Lasso regression","timestamp_sec":3510},{"timestamp_with_hours":"1:02:15","description":"Shows glmnet.fit piece of a Lasso (glmnet) model","packages":"glmnet","timestamp_sec":3735},{"timestamp_with_hours":"1:03:30","description":"Picking a lambda value (penalty parameter) and explaining which one to pick","timestamp_sec":3810},{"timestamp_with_hours":"1:08:15","description":"Taking most extreme coefficients (positive and negative) by grouping theme by direction","timestamp_sec":4095},{"timestamp_with_hours":"1:10:30","description":"Demonstrating tidytext package's sentiment lexicon, then looking at individual reviews to demonstrate the model","packages":"tidytext","timestamp_sec":4230},{"timestamp_with_hours":"1:17:30","description":"Visualizing each coefficient's effect on a single review","timestamp_sec":4650},{"timestamp_with_hours":"1:20:30","description":"Using str_trunc to truncate character strings","functions":"str_trunc","timestamp_sec":4830}]</script>
