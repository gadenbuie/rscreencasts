---
title: |
  Government Spending on Kids
description: |
  Data Manipulation, Functions, Embracing, Reading in Many .csv Files, Pairwise Correlation
date: 2020-09-14
date-format: long
---

Notable topics: Data Manipulation, Functions, Embracing, Reading in Many .csv Files, Pairwise Correlation

Recorded on: 2020-09-14

Timestamps by: Eric Fletcher

[View code](https://github.com/dgrtwo/data-screencasts/blob/master/2020_09_15_government_spending_kids.Rmd)

## Full screencast

<iframe class="video" src="https://www.youtube.com/embed/dHRPrVsnNwo" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

## Timestamps

<script id="timestamps" type="application-json">[{"timestamp_with_hours":"0:6:15","description":"Using `geom_line` and `summarize` to visualize education spending over time. First for all states. Then individual states. Then small groups of states using `%in%`. Then in random groups of size n using `%in%` and `sample` with `unique`. `fct_reorder` is used to reorder `state` factor levels by sorting along the `inf_adj` variable. \n\n`geom_vline` used to add reference to the 2009 financial crisis.","functions":"geom_line | summarize | unique | sample | facet_wrap | fct_reorder | theme_tufte | geom_vline","packages":"ggplot | dplyr | base | ggthemes | forcats","timestamp_sec":375},{"timestamp_with_hours":"0:16:00","description":"Take the previous chart setting the `inf_adj_perchild` for the first year  `1997` to `100%` in order to show a measure of increase from `100%` as opposed to absolute value for change over time for each state relative to `1997`.  `geom_hline` used to add reference for the `100%` starting point. David ends up changing the starting point from `100%` to `0%`\n\n`fct_reorder` with `max` used to reorder the plots in descending order based on highest peak values.\n\nDavid briefly mentions the [small multiples](https://www.sharpsightlabs.com/blog/small-multiples-ggplot/#:~:text=The%20small%20multiples%20technique%20is,groups%20or%20comparing%20over%20time.&text=In%20contrast%2C%20R's%20GGPlot2%20package,multiples%20extraordinarily%20easy%20to%20create.) approach to analyzing data.","functions":"geom_line | summarize | unique | sample | facet_wrap | fct_reorder | theme_tufte | geom_vline | geom_hline","packages":"ggplot | dplyr | base | ggthemes | forcats","timestamp_sec":960},{"timestamp_with_hours":"0:23:35","description":"Create a `function` named `plot_changed_faceted` to make it easier to visualize the many other variables included in the dataset.","functions":"function","timestamp_sec":1415},{"timestamp_with_hours":"0:27:25","description":"Create a `function` named `plot_faceted` with a `{{ y_axis }}` [embracing](https://dplyr.tidyverse.org/articles/programming.html) argument. Adding this function creates two stages: one for data transformation and another for plotting.","functions":"function","timestamp_sec":1645},{"timestamp_with_hours":"0:37:05","description":"Use the `dir` function with `pattern` and `purrr` package's `map_df` function to read in many different `.csv` files with GDP values for each state. \n\nTroubleshooting `Can't combine <character> and <double> columns` error using `function` and `mutate` with `across` and `as.numeric`.\n\nExtract state name from filename using `extract` from `tidyr` and `regular expression`.","functions":"dir | map_df | function | set_names | pivot_longer | separate | extract","packages":"base | purr | tidyr","timestamp_sec":2225},{"timestamp_with_hours":"0:50:50","description":"Unsuccessful attempt at importing state population data via a not user friendly dataset from `census.gov` by skipping the first 3 rows of the Excel file.","functions":"read_xlsx","packages":"readxl","timestamp_sec":3050},{"timestamp_with_hours":"0:54:22","description":"Use `geom_col` to see which states spend the most for each child for a single variable and multiple variables using `%in%`.\n\nUse `scale_fill_discrete` with `guide_legend(reverse = TRUE)` to change the ordering of the legend.","functions":"geom_col | fct_reorder | scale_fill_discrete","packages":"ggplot | forcats","timestamp_sec":3262},{"timestamp_with_hours":"0:57:40","description":"Use `geom_col` and 'pairwise_corr` to visualize the correlation between variables across states in 2016 using `pairwise correlation`.","functions":"pairwise_corr | fct_reorder","packages":"widyr","timestamp_sec":3460},{"timestamp_with_hours":"1:02:02","description":"Use ` geom_point` to plot `inf_adjust_perchild_PK12ed` versus `inf_adj_perchild_highered`. `geom_text` used to apply state names to each point.","functions":"pivot_wider | geom_point |geom_text","packages":"ggplot | tidyr","timestamp_sec":3722},{"timestamp_with_hours":"1:05:00","description":"Summary of screencast.","timestamp_sec":3900}]</script>
